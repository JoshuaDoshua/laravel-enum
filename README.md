# Laravel Enum

[![Latest Version on Packagist][ico-version]][link-packagist]
[![Software License][ico-license]](LICENSE.md)
[![Build Status][ico-travis]][link-travis]
[![Coverage Status][ico-scrutinizer]][link-scrutinizer]
[![Quality Score][ico-code-quality]][link-code-quality]
[![Total Downloads][ico-downloads]][link-downloads]

Laravel package that introduces a new Artisan command to generate [Enum classes][link-enum].

It provides an easy syntax to specify and map constants in Enum classes while adding PHPDoc tags to make IDEs recognise what constants can be invoked as methods to instantiate an Enum class.


## Install

Via Composer

``` bash
$ composer require cerbero/laravel-enum
```


## Usage

Enums can be generated by calling the Artisan command `make:enum` and specifying the class and constant names. Many enums can be defined at once by separating them with pipes (please note the use of quotes):

``` bash
$ php artisan make:enum Status 'IN_PROGRESS|COMPLETE|FAILED'
```

In the previous example no key has been defined, in this case keys are assumed to be equal to their lowercased constant name. This is how the `Status` enum will look like:

``` php
<?php

namespace App\Enums;

use Rexlabs\Enum\Enum;

/**
 * The Status enum.
 *
 * @method static self IN_PROGRESS()
 * @method static self COMPLETE()
 * @method static self FAILED()
 */
class Status extends Enum
{
    const IN_PROGRESS = 'in_progress';
    const COMPLETE = 'complete';
    const FAILED = 'failed';
}
```

Nonetheless you may need to define your own keys, that is possible by pairing constant names and keys with an `=` character:

``` bash
$ php artisan make:enum Status 'IN_PROGRESS=In progress|COMPLETE=Complete|FAILED=Failed'
```

The command above will generate the following `Progress` enum:

``` php
<?php

namespace App\Enums;

use Rexlabs\Enum\Enum;

/**
 * The Status enum.
 *
 * @method static self IN_PROGRESS()
 * @method static self COMPLETE()
 * @method static self FAILED()
 */
class Status extends Enum
{
    const IN_PROGRESS = 'In progress';
    const COMPLETE = 'Complete';
    const FAILED = 'Failed';
}
```

Similarly you can specify enum values by pairing keys and values with an `=` character:

``` bash
$ php artisan make:enum Status 'IN_PROGRESS=In progress=0|COMPLETE=Complete=1|FAILED=Failed=2'
```

The above command will generate the following `Status` enum and implement the `map()` method:

``` php
<?php

namespace App\Enums;

use Rexlabs\Enum\Enum;

/**
 * The Status enum.
 *
 * @method static self IN_PROGRESS()
 * @method static self COMPLETE()
 * @method static self FAILED()
 */
class Status extends Enum
{
    const IN_PROGRESS = 'In progress';
    const COMPLETE = 'Complete';
    const FAILED = 'Failed';

    /**
     * Retrieve a map of enum keys and values.
     *
     * @return array
     */
    public static function map() : array
    {
        return [
            static::IN_PROGRESS => 0,
            static::COMPLETE => 1,
            static::FAILED => 2,
        ];
    }
}
```

Sometimes you may want to define array of values in your keys or values, you can do that by providing JSON strings:

``` bash
$ php artisan make:enum Status 'NAMES={"in_progress":"In progress","complete":"Complete"}={"In progress":"in_progress","Complete":"complete"}'
```

This package will take care of building, indenting and formatting the array for you:

``` php
<?php

namespace App\Enums;

use Rexlabs\Enum\Enum;

/**
 * The Status enum.
 *
 * @method static self NAMES()
 */
class Status extends Enum
{
    const NAMES = [
        'in_progress' => 'In progress',
        'complete' => 'Complete',
    ];

    /**
     * Retrieve a map of enum keys and values.
     *
     * @return array
     */
    public static function map() : array
    {
        return [
            static::NAMES => [
                'In progress' => 'in_progress',
                'Complete' => 'complete',
            ],
        ];
    }
}
```

By default enums are generated in the `app/Enums` directory. If you prefer a different location, you can set the option `--path` (or the shortcut `-p`):

``` bash
$ php artisan make:enum Status 'IN_PROGRESS|COMPLETE|FAILED' --path=Other/Directory
```

The above command will generate the `Status` class in `app/Other/Directory`.

If you try to generate an enum that already exists, the existing enum won't be overwritten unless you set the option `--force` (or the shortcut `-f`):

``` bash
$ php artisan make:enum Status 'IN_PROGRESS|COMPLETE|FAILED' --force
```


## Change log

Please see [CHANGELOG](CHANGELOG.md) for more information on what has changed recently.


## Testing

``` bash
$ composer test
```


## Contributing

Please see [CONTRIBUTING](CONTRIBUTING.md) and [CODE_OF_CONDUCT](CODE_OF_CONDUCT.md) for details.


## Security

If you discover any security related issues, please email andrea.marco.sartori@gmail.com instead of using the issue tracker.


## Credits

- [Jodie Dunlop][link-jodie]
- [Enum PHP Library][link-enum]
- [Andrea Marco Sartori][link-author]


## License

The MIT License (MIT). Please see [License File](LICENSE.md) for more information.

[ico-version]: https://img.shields.io/packagist/v/cerbero/laravel-enum.svg?style=flat-square
[ico-license]: https://img.shields.io/badge/license-MIT-brightgreen.svg?style=flat-square
[ico-travis]: https://img.shields.io/travis/cerbero90/laravel-enum/master.svg?style=flat-square
[ico-scrutinizer]: https://img.shields.io/scrutinizer/coverage/g/cerbero90/laravel-enum.svg?style=flat-square
[ico-code-quality]: https://img.shields.io/scrutinizer/g/cerbero90/laravel-enum.svg?style=flat-square
[ico-downloads]: https://img.shields.io/packagist/dt/cerbero/laravel-enum.svg?style=flat-square

[link-packagist]: https://packagist.org/packages/cerbero/laravel-enum
[link-travis]: https://travis-ci.org/cerbero90/laravel-enum
[link-scrutinizer]: https://scrutinizer-ci.com/g/cerbero90/laravel-enum/code-structure
[link-code-quality]: https://scrutinizer-ci.com/g/cerbero90/laravel-enum
[link-downloads]: https://packagist.org/packages/cerbero/laravel-enum
[link-jodie]: https://github.com/jodiedunlop
[link-enum]: https://github.com/rexlabsio/enum-php
[link-author]: https://github.com/cerbero90
